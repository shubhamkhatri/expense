Index: app/src/main/res/layout/activity_add_wallet_entry.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<androidx.constraintlayout.widget.ConstraintLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:background=\"#212121\"\r\n    tools:context=\".ui.add_entry.AddWalletEntryActivity\">\r\n\r\n    <com.google.android.material.floatingactionbutton.FloatingActionButton\r\n        android:id=\"@+id/activity_contact_fab\"\r\n        android:layout_width=\"wrap_content\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_centerInParent=\"true\"\r\n        android:layout_marginStart=\"8dp\"\r\n        android:layout_marginTop=\"8dp\"\r\n        android:layout_marginEnd=\"8dp\"\r\n        android:layout_marginBottom=\"8dp\"\r\n        android:src=\"@drawable/baseline_add_white_18dp\"\r\n        android:transitionName=\"transition_reveal\"\r\n        app:backgroundTint=\"@color/colorPrimary\"\r\n        app:elevation=\"0dp\"\r\n        app:fabSize=\"normal\"\r\n        app:layout_constraintBottom_toBottomOf=\"@+id/root_layout\"\r\n        app:layout_constraintEnd_toEndOf=\"@+id/root_layout\"\r\n        app:layout_constraintStart_toStartOf=\"parent\"\r\n        app:layout_constraintTop_toTopOf=\"parent\"\r\n        app:pressedTranslationZ=\"8dp\" />\r\n    <androidx.constraintlayout.widget.ConstraintLayout\r\n        android:id=\"@+id/root_layout\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:id=\"@+id/root_layout2\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:background=\"@color/backgroundPrimary\"\r\n            >\r\n            <androidx.appcompat.widget.Toolbar\r\n                android:id=\"@+id/toolbar\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"?attr/colorPrimary\"\r\n                android:elevation=\"0dp\"\r\n                android:theme=\"@style/ToolbarTheme\"\r\n                app:layout_scrollFlags=\"scroll|enterAlways|snap\"\r\n                app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"\r\n                app:titleTextColor=\"@color/textColorPrimary\" />\r\n\r\n            <ScrollView\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"0dp\"\r\n                app:layout_constraintBottom_toTopOf=\"@+id/add_entry_button\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/toolbar\"\r\n                app:layout_constraintVertical_bias=\"0.0\">\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_alignParentStart=\"true\"\r\n                    android:layout_alignParentTop=\"true\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <TextView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingLeft=\"12dp\"\r\n                        android:paddingTop=\"8dp\"\r\n                        android:text=\"Choose type:\"\r\n                        android:textColor=\"@color/help_text_material_light\" />\r\n\r\n                    <Spinner\r\n                        android:id=\"@+id/select_type_spinner\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"72dp\" />\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginLeft=\"12dp\"\r\n                        android:layout_marginRight=\"12dp\"\r\n                        android:layout_marginBottom=\"8dp\"\r\n                        android:background=\"@color/divider_color\" />\r\n\r\n                    <TextView\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:paddingLeft=\"12dp\"\r\n                        android:paddingTop=\"4dp\"\r\n                        android:text=\"Select category:\"\r\n                        android:textColor=\"@color/help_text_material_light\" />\r\n\r\n                    <Spinner\r\n                        android:id=\"@+id/select_category_spinner\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"72dp\" />\r\n\r\n                    <View\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"1dp\"\r\n                        android:layout_marginLeft=\"12dp\"\r\n                        android:layout_marginRight=\"12dp\"\r\n                        android:layout_marginBottom=\"8dp\"\r\n                        android:background=\"@color/divider_color\" />\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:id=\"@+id/select_name_inputlayout\"\r\n\r\n                        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"8dp\"\r\n                        android:layout_marginRight=\"8dp\"\r\n                        android:layout_marginBottom=\"16dp\"\r\n                        android:hint=\"Name\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/sign_out_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:id=\"@+id/select_name_edittext\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                             />\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:id=\"@+id/select_amount_inputlayout\"\r\n                        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"8dp\"\r\n                        android:layout_marginRight=\"8dp\"\r\n                        android:layout_marginBottom=\"16dp\"\r\n                        android:hint=\"Amount\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/sign_out_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:id=\"@+id/select_amount_edittext\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:inputType=\"number\"\r\n                            app:errorEnabled=\"true\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:id=\"@+id/select_mobile_inputlayout\"\r\n                        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"8dp\"\r\n                        android:layout_marginRight=\"8dp\"\r\n                        android:layout_marginBottom=\"16dp\"\r\n                        android:hint=\"Mobile Number\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/sign_out_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:id=\"@+id/select_mobile_edittext\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:inputType=\"number\"\r\n                            app:errorEnabled=\"true\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:id=\"@+id/select_village_inputlayout\"\r\n                        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"8dp\"\r\n                        android:layout_marginRight=\"8dp\"\r\n                        android:layout_marginBottom=\"16dp\"\r\n                        android:hint=\"Village/City Name\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/sign_out_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:id=\"@+id/select_village_edittext\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:inputType=\"text\"\r\n                            app:errorEnabled=\"true\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n                    <com.google.android.material.textfield.TextInputLayout\r\n                        android:id=\"@+id/select_description_inputlayout\"\r\n                        style=\"@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginLeft=\"8dp\"\r\n                        android:layout_marginRight=\"8dp\"\r\n                        android:layout_marginBottom=\"16dp\"\r\n                        android:hint=\"Loan Details\"\r\n                        app:layout_constraintTop_toBottomOf=\"@+id/sign_out_button\">\r\n\r\n                        <com.google.android.material.textfield.TextInputEditText\r\n                            android:id=\"@+id/select_description_edittext\"\r\n                            android:layout_width=\"match_parent\"\r\n                            android:layout_height=\"150dp\"\r\n                            android:gravity=\"top\"\r\n                            android:inputType=\"textMultiLine\"\r\n                            app:errorEnabled=\"true\"/>\r\n\r\n                    </com.google.android.material.textfield.TextInputLayout>\r\n\r\n                    <androidx.constraintlayout.widget.ConstraintLayout\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_marginBottom=\"16dp\">\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView9\"\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingLeft=\"12dp\"\r\n                            android:text=\"Select day:\"\r\n                            android:textColor=\"@color/help_text_material_light\"\r\n                            app:layout_constraintBottom_toTopOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintEnd_toStartOf=\"@+id/guideline3\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintTop_toTopOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintVertical_bias=\"0.0\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/textView10\"\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:paddingLeft=\"12dp\"\r\n                            android:text=\"Select time:\"\r\n                            android:textColor=\"@color/help_text_material_light\"\r\n                            app:layout_constraintEnd_toEndOf=\"@+id/choose_time_textview\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/choose_time_textview\"\r\n                            app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/choose_day_textview\"\r\n                            style=\"@style/Widget.AppCompat.Spinner\"\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"50dp\"\r\n                            android:layout_alignParentStart=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginRight=\"8dp\"\r\n                            android:gravity=\"center\"\r\n                            android:paddingLeft=\"8dp\"\r\n                            android:text=\"aha\"\r\n                            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                            app:layout_constraintEnd_toStartOf=\"@+id/guideline3\"\r\n                            app:layout_constraintStart_toStartOf=\"parent\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textView9\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:background=\"@color/divider_color\"\r\n                            app:layout_constraintEnd_toEndOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintHorizontal_bias=\"1.0\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/choose_day_textview\" />\r\n\r\n                        <TextView\r\n                            android:id=\"@+id/choose_time_textview\"\r\n                            style=\"@style/Widget.AppCompat.Spinner\"\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"50dp\"\r\n                            android:layout_alignParentStart=\"true\"\r\n                            android:layout_alignParentBottom=\"true\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:gravity=\"center_vertical|center_horizontal\"\r\n                            android:paddingRight=\"8dp\"\r\n                            android:text=\"aha\"\r\n                            app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                            app:layout_constraintEnd_toEndOf=\"parent\"\r\n                            app:layout_constraintStart_toEndOf=\"@+id/choose_day_textview\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/textView10\" />\r\n\r\n                        <View\r\n                            android:layout_width=\"0dp\"\r\n                            android:layout_height=\"1dp\"\r\n                            android:layout_marginStart=\"8dp\"\r\n                            android:layout_marginEnd=\"8dp\"\r\n                            android:background=\"@color/divider_color\"\r\n                            app:layout_constraintEnd_toEndOf=\"@+id/choose_time_textview\"\r\n                            app:layout_constraintStart_toStartOf=\"@+id/choose_time_textview\"\r\n                            app:layout_constraintTop_toBottomOf=\"@+id/choose_time_textview\" />\r\n\r\n                        <androidx.constraintlayout.widget.Guideline\r\n                            android:id=\"@+id/guideline3\"\r\n                            android:layout_width=\"wrap_content\"\r\n                            android:layout_height=\"wrap_content\"\r\n                            android:orientation=\"vertical\"\r\n                            app:layout_constraintGuide_percent=\"0.6\" />\r\n                    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n                </LinearLayout>\r\n            </ScrollView>\r\n\r\n            <Button\r\n                android:id=\"@+id/add_entry_button\"\r\n                style=\"@style/Widget.AppCompat.Button.Colored\"\r\n                android:layout_width=\"120dp\"\r\n                android:layout_height=\"52dp\"\r\n                android:layout_centerHorizontal=\"true\"\r\n                android:layout_gravity=\"center_horizontal\"\r\n                android:layout_marginStart=\"8dp\"\r\n                android:layout_marginEnd=\"8dp\"\r\n                android:layout_marginBottom=\"8dp\"\r\n                android:backgroundTint=\"@color/colorPrimary\"\r\n                android:paddingLeft=\"8dp\"\r\n                android:paddingRight=\"8dp\"\r\n                android:text=\"Add\"\r\n                app:layout_constraintBottom_toBottomOf=\"parent\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\" />\r\n    </androidx.constraintlayout.widget.ConstraintLayout>\r\n\r\n</androidx.constraintlayout.widget.ConstraintLayout>\r\n</androidx.constraintlayout.widget.ConstraintLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_add_wallet_entry.xml	(revision 6bb75a7f100edfea424af96390aced8745bc2810)
+++ app/src/main/res/layout/activity_add_wallet_entry.xml	(date 1606835697101)
@@ -183,6 +183,15 @@
                             app:errorEnabled="true"/>
 
                     </com.google.android.material.textfield.TextInputLayout>
+
+                    <Spinner
+                        android:id="@+id/select_city_spinner"
+                        android:layout_width="match_parent"
+                        android:layout_height="wrap_content"
+                        android:layout_marginLeft="8dp"
+                        android:layout_marginRight="8dp"
+                        android:layout_marginBottom="16dp"/>
+
                     <com.google.android.material.textfield.TextInputLayout
                         android:id="@+id/select_description_inputlayout"
                         style="@style/Widget.MaterialComponents.TextInputLayout.OutlinedBox"
Index: app/src/main/java/smart/budget/expense/ui/main/history/HistoryFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package smart.budget.expense.ui.main.history;\r\n\r\nimport android.Manifest;\r\nimport android.content.DialogInterface;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.constraintlayout.solver.widgets.Rectangle;\r\nimport androidx.core.content.ContextCompat;\r\nimport androidx.recyclerview.widget.LinearLayoutManager;\r\nimport androidx.recyclerview.widget.RecyclerView;\r\n\r\nimport android.os.Environment;\r\nimport android.view.LayoutInflater;\r\nimport android.view.Menu;\r\nimport android.view.MenuInflater;\r\nimport android.view.MenuItem;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ImageView;\r\nimport android.widget.Spinner;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\nimport com.itextpdf.text.BaseColor;\r\nimport com.itextpdf.text.Document;\r\nimport com.itextpdf.text.Paragraph;\r\nimport com.itextpdf.text.pdf.PdfWriter;\r\nimport com.leavjenn.smoothdaterangepicker.date.SmoothDateRangePickerFragment;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.text.DateFormat;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.List;\r\nimport java.util.Locale;\r\n\r\nimport smart.budget.expense.R;\r\nimport smart.budget.expense.firebase.ListDataSet;\r\nimport smart.budget.expense.firebase.models.User;\r\nimport smart.budget.expense.firebase.models.WalletEntry;\r\nimport smart.budget.expense.firebase.viewmodel_factories.WalletEntriesHistoryViewModelFactory;\r\nimport smart.budget.expense.base.BaseFragment;\r\nimport smart.budget.expense.ui.add_entry.AddWalletEntryActivity;\r\nimport smart.budget.expense.ui.options.OptionsActivity;\r\n\r\npublic class HistoryFragment extends BaseFragment {\r\n    public static final CharSequence TITLE = \"History\";\r\n    Calendar calendarStart;\r\n    Calendar calendarEnd;\r\n    private RecyclerView historyRecyclerView;\r\n    private WalletEntriesRecyclerViewAdapter historyRecyclerViewAdapter;\r\n    private Menu menu;\r\n    private TextView dividerTextView;\r\n    private FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    private ArrayList<String> city = new ArrayList<String>();\r\n    private ImageView download;\r\n    private String City = \"default\";\r\n    private Spinner citySpinner;\r\n    private String listText = \"\";\r\n    private static final int STORAGE_CODE = 1000;\r\n    \r\n    public static HistoryFragment newInstance() {\r\n\r\n        return new HistoryFragment();\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setHasOptionsMenu(true);\r\n    }\r\n\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState) {\r\n        return inflater.inflate(R.layout.fragment_history, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\r\n        updateCitySpinner();\r\n\r\n        dividerTextView = view.findViewById(R.id.divider_textview);\r\n        dividerTextView.setText(\"Last 100 entries:\");\r\n        historyRecyclerView = view.findViewById(R.id.history_recycler_view);\r\n        historyRecyclerView.setLayoutManager(new LinearLayoutManager(getActivity().getApplicationContext()));\r\n        historyRecyclerViewAdapter = new WalletEntriesRecyclerViewAdapter(getActivity(), getUid(), City);\r\n        historyRecyclerView.setAdapter(historyRecyclerViewAdapter);\r\n        citySpinner = (Spinner) view.findViewById(R.id.city_spinner);\r\n        download = view.findViewById(R.id.download_button);\r\n\r\n        historyRecyclerViewAdapter.registerAdapterDataObserver(new RecyclerView.AdapterDataObserver() {\r\n            @Override\r\n            public void onItemRangeInserted(int positionStart, int itemCount) {\r\n                historyRecyclerView.smoothScrollToPosition(0);\r\n            }\r\n        });\r\n\r\n        download.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View view) {\r\n               listText=historyRecyclerViewAdapter.sendListText();\r\n                if (Build.VERSION.SDK_INT > Build.VERSION_CODES.M){\r\n                    //system OS >= Marshmallow(6.0), check if permission is enabled or not\r\n                    if (getActivity().checkSelfPermission(Manifest.permission.WRITE_EXTERNAL_STORAGE) ==\r\n                            PackageManager.PERMISSION_DENIED){\r\n                        //permission was not granted, request it\r\n                        String[] permissions = {Manifest.permission.WRITE_EXTERNAL_STORAGE};\r\n                        requestPermissions(permissions, STORAGE_CODE);\r\n                    }\r\n                    else {\r\n                        //permission already granted, call save pdf method\r\n                        savePdf();\r\n                    }\r\n                }\r\n                else {\r\n                    //system OS < Marshmallow, call save pdf method\r\n                    savePdf();\r\n                }\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        switch (requestCode){\r\n            case STORAGE_CODE:{\r\n                if (grantResults.length > 0 && grantResults[0] == PackageManager.PERMISSION_GRANTED){\r\n\r\n                }\r\n                else {\r\n                    //permission was denied from popup, show error message\r\n                    Toast.makeText(getActivity(), \"Permission denied...!\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {\r\n        inflater.inflate(R.menu.history_fragment_menu, menu);\r\n        this.menu = menu;\r\n        updateCalendarIcon();\r\n        super.onCreateOptionsMenu(menu, inflater);\r\n    }\r\n\r\n\r\n    @Override\r\n    public boolean onOptionsItemSelected(MenuItem item) {\r\n        switch (item.getItemId()) {\r\n            case R.id.action_date_range:\r\n                showSelectDateRangeDialog();\r\n                return true;\r\n            case R.id.action_options:\r\n                startActivity(new Intent(getActivity(), OptionsActivity.class));\r\n                return true;\r\n            default:\r\n                return super.onOptionsItemSelected(item);\r\n        }\r\n    }\r\n\r\n    private void updateCalendarIcon() {\r\n        MenuItem calendarIcon = menu.findItem(R.id.action_date_range);\r\n        if (calendarIcon == null) return;\r\n        WalletEntriesHistoryViewModelFactory.Model model = WalletEntriesHistoryViewModelFactory.getModel(getUid(), getActivity());\r\n        if (model.hasDateSet()) {\r\n            calendarIcon.setIcon(ContextCompat.getDrawable(getContext(), R.drawable.icon_calendar_active));\r\n\r\n            DateFormat dateFormat = new SimpleDateFormat(\"dd-MM-yy\");\r\n\r\n            dividerTextView.setText(\"Date range: \" + dateFormat.format(model.getStartDate().getTime())\r\n                    + \"  -  \" + dateFormat.format(model.getEndDate().getTime()));\r\n        } else {\r\n            calendarIcon.setIcon(ContextCompat.getDrawable(getContext(), R.drawable.icon_calendar));\r\n\r\n            dividerTextView.setText(\"Last 100 entries:\");\r\n        }\r\n\r\n    }\r\n\r\n    private void showSelectDateRangeDialog() {\r\n        SmoothDateRangePickerFragment datePicker = SmoothDateRangePickerFragment.newInstance(new SmoothDateRangePickerFragment.OnDateRangeSetListener() {\r\n            @Override\r\n            public void onDateRangeSet(SmoothDateRangePickerFragment view, int yearStart, int monthStart, int dayStart, int yearEnd, int monthEnd, int dayEnd) {\r\n                calendarStart = Calendar.getInstance();\r\n                calendarStart.set(yearStart, monthStart, dayStart);\r\n                calendarStart.set(Calendar.HOUR_OF_DAY, 0);\r\n                calendarStart.set(Calendar.MINUTE, 0);\r\n                calendarStart.set(Calendar.SECOND, 0);\r\n\r\n                calendarEnd = Calendar.getInstance();\r\n                calendarEnd.set(yearEnd, monthEnd, dayEnd);\r\n                calendarEnd.set(Calendar.HOUR_OF_DAY, 23);\r\n                calendarEnd.set(Calendar.MINUTE, 59);\r\n                calendarEnd.set(Calendar.SECOND, 59);\r\n                calendarUpdated();\r\n                updateCalendarIcon();\r\n            }\r\n        });\r\n        datePicker.setOnCancelListener(new DialogInterface.OnCancelListener() {\r\n            @Override\r\n            public void onCancel(DialogInterface dialog) {\r\n                calendarStart = null;\r\n                calendarEnd = null;\r\n                calendarUpdated();\r\n                updateCalendarIcon();\r\n            }\r\n        });\r\n        datePicker.show(getActivity().getFragmentManager(), \"TAG\");\r\n    }\r\n\r\n    private void calendarUpdated() {\r\n        historyRecyclerViewAdapter.setDateRange(calendarStart, calendarEnd);\r\n    }\r\n\r\n    private void updateCitySpinner() {\r\n        db.collection(\"data\").document(\"city\").get()\r\n                .addOnSuccessListener(new OnSuccessListener<DocumentSnapshot>() {\r\n                    @Override\r\n                    public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                        city = (ArrayList<String>) documentSnapshot.get(\"city\");\r\n\r\n                        ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(getActivity().getBaseContext(), android.R.layout.simple_spinner_item, city);\r\n                        adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n                        citySpinner.setAdapter(adapter1);\r\n                        citySpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n                            @Override\r\n                            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {\r\n                                City = city.get(i);\r\n                                // historyRecyclerViewAdapter = new WalletEntriesRecyclerViewAdapter(getActivity(), getUid(), City);\r\n                                //historyRecyclerView.setAdapter(historyRecyclerViewAdapter);\r\n                                //Todo Update the Adaptor by fetching the list again and again\r\n                                Toast.makeText(getActivity(), \"City in spinner is: \" + City, Toast.LENGTH_LONG).show();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onNothingSelected(AdapterView<?> adapterView) {\r\n                                Toast.makeText(getActivity(), \"Please select city\", Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n    }\r\n\r\n   /* private void getData() {\r\n        ref = FirebaseDatabase.getInstance().getReference(\"wallet-entries\").child(getUid()).child(\"default\");\r\n        ref.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                for (DataSnapshot ds : snapshot.getChildren()) {\r\n                    walletEntry = ds.getValue(WalletEntry.class);\r\n                    walletList.add(walletEntry);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    */\r\n\r\n\r\n    private void savePdf() {\r\n        //create object of Document class\r\n        Document mDoc = new Document();\r\n        //pdf file name\r\n        String mFileName = new SimpleDateFormat(\"yyyyMMdd_HHmmss\",\r\n                Locale.getDefault()).format(System.currentTimeMillis());\r\n        //pdf file path\r\n        String mFilePath = Environment.getExternalStorageDirectory() + \"/\" + \"ExpenseDocument\" + \"/\";\r\n\r\n        try {\r\n            File dir = new File(mFilePath);\r\n            if(!dir.exists())\r\n                dir.mkdirs();\r\n\r\n            File file = new File(dir,mFileName+\".pdf\");\r\n            FileOutputStream fOut = new FileOutputStream(file);\r\n\r\n            //create instance of PdfWriter class\r\n            PdfWriter.getInstance(mDoc, fOut);\r\n            //open the document for writing\r\n            mDoc.open();\r\n\r\n\r\n            //add author of the document (optional)\r\n            mDoc.addAuthor(\"Wissensquelle Robotics\");\r\n\r\n            //add paragraph to the document\r\n            mDoc.add(new Paragraph(listText));\r\n\r\n            //close the document\r\n            mDoc.close();\r\n            //show message that file is saved, it will show file name and file path too\r\n            Toast.makeText(getActivity(), mFileName +\".pdf\\nis saved to\\n\"+ mFilePath, Toast.LENGTH_SHORT).show();\r\n        }\r\n        catch (Exception e){\r\n            //if any thing goes wrong causing exception, get and show exception message\r\n            Toast.makeText(getActivity(), e.getMessage(), Toast.LENGTH_SHORT).show();\r\n        }\r\n    }\r\n\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/smart/budget/expense/ui/main/history/HistoryFragment.java	(revision 6bb75a7f100edfea424af96390aced8745bc2810)
+++ app/src/main/java/smart/budget/expense/ui/main/history/HistoryFragment.java	(date 1607081462818)
@@ -75,7 +75,7 @@
     private Spinner citySpinner;
     private String listText = "";
     private static final int STORAGE_CODE = 1000;
-    
+
     public static HistoryFragment newInstance() {
 
         return new HistoryFragment();
